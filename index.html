<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>AppHub â€“ Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="https://www.dropbox.com/scl/fi/udvygiv463rwfdjcf9q9m/apphub.png?rlkey=tzfqv7nur15y3fjezvap2x07h&st=wkkmu99f&dl=1">
</head>
<body>

    <div class="login-container">
        <div class="logo">
            <div class="logo-icon">A</div>
        </div>

        <h1>AppHub</h1>
        <p class="subtitle">Secure Account Access</p>

        <form>
            <div class="form-group">
                <input 
                    id="email"
                    type="email"
                    placeholder="Email"
                    required
                />
            </div>

            <div class="form-group">
                <input 
                    id="password"
                    type="password"
                    placeholder="Password"
                    required
                />
            </div>

            <button class="login-btn" type="submit">
                Login
            </button>
        </form>
        <div class="social-login">
    <button type="button" id="googleBtn">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/3840px-Google_%22G%22_logo.svg.png" alt="Google" width="24" height="24">
    </button>
    <button type="button" id="microsoftBtn">
        <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg" alt="Microsoft" width="24" height="24">
    </button>
</div>


        <div class="footer-link">
            <a href="register.html">Create an account?</a>
        </div>
    </div>
    <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
import { 
  getAuth, 
  signInWithEmailAndPassword,
  GoogleAuthProvider, 
  OAuthProvider,
  signInWithPopup,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDSekwBtU3u3DquxJIm9N7urL1_8zdrm34",
  authDomain: "apphub-94be4.firebaseapp.com",
  projectId: "apphub-94be4",
  storageBucket: "apphub-94be4.firebasestorage.app",
  messagingSenderId: "86249833874",
  appId: "1:86249833874:web:d83466be51eaf27a4a2d4b",
  measurementId: "G-B16MB4RCTQ"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// Auto-redirect si dÃ©jÃ  connectÃ©
onAuthStateChanged(auth, (user) => {
  if (user) window.location.href = "dashboard.html";
});

// Login email/password
const form = document.querySelector("form");
form.addEventListener("submit", (e) => {
  e.preventDefault();
  const email = document.querySelector("#email").value;
  const password = document.querySelector("#password").value;

  signInWithEmailAndPassword(auth, email, password)
    .then(() => window.location.href = "dashboard.html")
    .catch(() => alert("Email ou mot de passe incorrect âŒ"));
});

// ðŸ”¥ Social login
const googleProvider = new GoogleAuthProvider();
const appleProvider = new OAuthProvider('apple.com');
const microsoftProvider = new OAuthProvider('microsoft.com');

document.getElementById("googleBtn").addEventListener("click", () => {
  signInWithPopup(auth, googleProvider)
    .then(() => window.location.href = "dashboard.html")
    .catch(err => alert(err.message));
});

document.getElementById("microsoftBtn").addEventListener("click", () => {
  signInWithPopup(auth, microsoftProvider)
    .then(() => window.location.href = "dashboard.html")
    .catch(err => alert(err.message));
});

</script>

</body>
<script src="script.js"></script>
</html>

